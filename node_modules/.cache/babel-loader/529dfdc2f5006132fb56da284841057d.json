{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FACU PAPA\\\\Desktop\\\\my-app-master\\\\src\\\\service\\\\Contex.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Context = /*#__PURE__*/createContext();\nexport const CartContext = ({\n  children\n}) => {\n  _s();\n\n  const [cart, setCart] = useState([]);\n  const [firstExecution, setFirstExecution] = useState(true);\n  const [cartSize, setCartSize] = useState(0);\n  const [cartTotal, setCartTotal] = useState(0);\n\n  const manageCart = whatever => {\n    setCart(whatever);\n\n    try {\n      localStorage.setItem('Mania_cart', JSON.stringify(whatever));\n\n      if (JSON.parse(localStorage.getItem('Mania_cart')).length !== 0) {\n        const localManiaCart = JSON.parse(localStorage.getItem('Mania_cart'));\n        localStorage.setItem('Mania_cartSize', localManiaCart.reduce((totalQuantity, {\n          quantity\n        }) => {\n          return totalQuantity + quantity;\n        }, 0));\n        localStorage.setItem('Mania_cartTotal', localManiaCart.reduce((totalBill, {\n          quantity,\n          itemCart\n        }) => {\n          return totalBill + quantity * (itemCart.promoted ? itemCart.price * 0.85 : itemCart.price);\n        }, 0));\n        setCartSize(localStorage.getItem('Mania_cartSize'));\n        setCartTotal(localStorage.getItem('Mania_cartTotal'));\n      } else {\n        localStorage.setItem('Mania_cartSize', '0');\n        setCartSize(localStorage.getItem('Mania_cartSize'));\n      }\n    } catch (err) {\n      clearCart();\n    }\n  };\n\n  const firstExec = () => setFirstExecution(false);\n\n  const isInCart = id => cart.filter(obj => obj.itemCart['id'] === id).length !== 0;\n\n  const addToCart = (item, count) => {\n    try {\n      if (isInCart(item['id'])) {\n        alert(`${item.name} ya se encuentra en el carrito!`);\n      } else {\n        manageCart([...cart, {\n          itemCart: item,\n          quantity: count\n        }]);\n      }\n    } catch (err) {\n      clearCart();\n    }\n  };\n\n  const removeFromCart = id => {\n    try {\n      if (isInCart(id)) {\n        //alert(`Intento de eliminar ${item['name']} - id de producto: ${item['id']}`)\n        const filtered = cart.filter(obj => obj.itemCart['id'] !== id);\n        manageCart(filtered);\n      } else {}\n    } catch (err) {\n      clearCart();\n    }\n  };\n\n  const clearCart = () => {\n    manageCart([]);\n    localStorage.clear();\n  };\n\n  useEffect(() => {\n    try {\n      if (firstExecution) {\n        if (cart.length) {\n          localStorage.setItem('Mania_cart', JSON.stringify(cart));\n        } else if (localStorage.getItem('Mania_cart')) {\n          manageCart(JSON.parse(localStorage.getItem('Mania_cart')));\n        }\n      }\n\n      firstExec();\n    } catch (err) {\n      clearCart();\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      cart,\n      isInCart,\n      addToCart,\n      removeFromCart,\n      clearCart,\n      cartSize,\n      cartTotal\n    },\n    children: [\" \", children, \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 10\n  }, this);\n};\n\n_s(CartContext, \"/IzV4HApiQB0The5mx3ntqiBLVA=\");\n\n_c = CartContext;\n\nvar _c;\n\n$RefreshReg$(_c, \"CartContext\");","map":{"version":3,"sources":["C:/Users/FACU PAPA/Desktop/my-app-master/src/service/Contex.jsx"],"names":["React","createContext","useEffect","useState","Context","CartContext","children","cart","setCart","firstExecution","setFirstExecution","cartSize","setCartSize","cartTotal","setCartTotal","manageCart","whatever","localStorage","setItem","JSON","stringify","parse","getItem","length","localManiaCart","reduce","totalQuantity","quantity","totalBill","itemCart","promoted","price","err","clearCart","firstExec","isInCart","id","filter","obj","addToCart","item","count","alert","name","removeFromCart","filtered","clear"],"mappings":"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","sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\r\n\r\nexport const Context = createContext();\r\n\r\n\r\nexport const CartContext = ({ children }) => {\r\n  const [cart, setCart] = useState([]);\r\n  const [firstExecution, setFirstExecution] = useState(true);\r\n  const [cartSize, setCartSize] = useState(0);\r\n  const [cartTotal, setCartTotal] = useState(0);\r\n\r\n\r\n  const manageCart = whatever => {\r\n    setCart(whatever)\r\n\r\n    try {\r\n      localStorage.setItem('Mania_cart', JSON.stringify(whatever))\r\n      if (JSON.parse(localStorage.getItem('Mania_cart')).length !== 0) {\r\n        const localManiaCart = JSON.parse(localStorage.getItem('Mania_cart'))\r\n\r\n        localStorage.setItem('Mania_cartSize', localManiaCart.reduce((totalQuantity, { quantity }) => {\r\n          return totalQuantity + quantity\r\n        }, 0));\r\n\r\n        localStorage.setItem('Mania_cartTotal', localManiaCart.reduce((totalBill, { quantity, itemCart }) => {\r\n          return totalBill + quantity * (itemCart.promoted ? itemCart.price * 0.85 : itemCart.price)\r\n        }, 0))\r\n\r\n\r\n        setCartSize(localStorage.getItem('Mania_cartSize'))\r\n        setCartTotal(localStorage.getItem('Mania_cartTotal'))\r\n      }\r\n      else {\r\n        localStorage.setItem('Mania_cartSize', '0');\r\n        setCartSize(localStorage.getItem('Mania_cartSize'))\r\n      }\r\n    }\r\n    catch (err) {\r\n      clearCart()\r\n    }\r\n  };\r\n\r\n  const firstExec = () => setFirstExecution(false);\r\n\r\n\r\n  const isInCart = id => cart.filter(obj => obj.itemCart['id'] === id).length !== 0;\r\n\r\n  const addToCart = (item, count) => {\r\n    try {\r\n      if (isInCart(item['id'])) {\r\n        alert(`${item.name} ya se encuentra en el carrito!`)\r\n      } else {\r\n        manageCart([...cart, { itemCart: item, quantity: count }])\r\n      }\r\n    }\r\n    catch (err) {\r\n      clearCart()\r\n    }\r\n  }\r\n\r\n  const removeFromCart = id => {\r\n    try {\r\n      if (isInCart(id)) {\r\n        //alert(`Intento de eliminar ${item['name']} - id de producto: ${item['id']}`)\r\n        const filtered = cart.filter(obj => obj.itemCart['id'] !== id)\r\n        manageCart(filtered);\r\n      }\r\n      else {\r\n      }\r\n    }\r\n    catch (err) {\r\n      clearCart()\r\n    }\r\n  }\r\n\r\n  const clearCart = () => {\r\n    manageCart([])\r\n    localStorage.clear()\r\n  }\r\n\r\n  useEffect(() => {\r\n    try {\r\n      if (firstExecution) {\r\n        if (cart.length) { localStorage.setItem('Mania_cart', JSON.stringify(cart)) }\r\n        else if (localStorage.getItem('Mania_cart')) {\r\n          manageCart(JSON.parse(localStorage.getItem('Mania_cart')))\r\n        }\r\n      }\r\n      firstExec()\r\n    }\r\n    catch (err) {\r\n      clearCart()\r\n    }\r\n  })\r\n\r\n\r\n\r\n  return <Context.Provider value={{ cart, isInCart, addToCart, removeFromCart, clearCart, cartSize, cartTotal }}> {children} </Context.Provider>;\r\n}"]},"metadata":{},"sourceType":"module"}